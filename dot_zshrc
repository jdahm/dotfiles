# Completions
autoload -Uz compinit
compinit

# Number of lines kept in history
export HISTSIZE=10000

# Number of lines saved in the history after logout
export SAVEHIST=10000

# Location of history
export HISTFILE=$HOME/.zsh_history

# Append command to history file once executed
setopt inc_append_history

if [ -d /opt/homebrew ]; then
	# Setup homebrew
	eval "$(/opt/homebrew/bin/brew shellenv)"

	source $(brew --prefix)/share/google-cloud-sdk/path.zsh.inc || true
	source $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh || true
	source $(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh || true
	source $(brew --prefix)/share/zsh-history-substring-search/zsh-history-substring-search.zsh || true

	alias brew-update="brew bundle --cleanup --global"
fi

if command -v starship &>/dev/null; then
	eval "$(starship init zsh)"
fi

if command -v fzf &>/dev/null; then
	source <(fzf --zsh)
fi

if command -v direnv &>/dev/null; then
	eval "$(direnv hook zsh)"
fi

if command -v pyenv &>/dev/null; then
	eval "$(pyenv init -)"
fi

if command -v tfenv &>/dev/null; then
	export PATH=$HOME/.tfenv/bin:$PATH
fi

export PATH=$HOME/bin:$HOME/go/bin:$PATH
export EDITOR=vim
export VISUAL=vim

source $HOME/.config/broot/launcher/bash/br || true
